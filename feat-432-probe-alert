-- TABLE T_ALERT_TRACKING_ATR

﻿ALTER TABLE "T_ALERT_TRACKING_ATR" RENAME TO "T_MESSAGE_MSG";

ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_ID" TO "MSG_ID";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_DELETE" TO "MSG_DELETE";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_RECEIV_DATE" TO "MSG_RECEIVE_DATE";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_SEND_DATE" TO "MSG_SEND_DATE";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_ACK_GW" TO "MSG_ACK_GW";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_ACK_ID" TO "MSG_ACK_ID";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_ACK_PORT" TO "MSG_ACK_PORT";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_CONTENT" TO "MSG_CONTENT";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_RECEIVER_SRV" TO "MSG_RECEIVER_SRV";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_SENDER_SRV" TO "MSG_SENDER_SRV";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_MED_MED_ID" TO "MSG_MED_MED_ID";
ALTER TABLE "T_MESSAGE_MSG" RENAME COLUMN "ATR_ALE_ALE_ID" TO "MSG_ALE_ALE_ID";

ALTER TABLE "T_ALERT_TRACKING_EVENT_ATE" RENAME COLUMN "ATE_ATR_ATR_ID" TO "ATE_MSG_MSG_ID";

-- TABLE T_ALERT_TRACKING_EVENT_ATE

﻿ALTER TABLE "T_ALERT_TRACKING_EVENT_ATE" RENAME TO "T_MESSAGE_TRACKING_EVENT_MTE";

ALTER TABLE "T_MESSAGE_TRACKING_EVENT_MTE" RENAME COLUMN "ATE_ID" to "MTE_ID";
ALTER TABLE "T_MESSAGE_TRACKING_EVENT_MTE" RENAME COLUMN "ATE_VALUE" to "MTE_VALUE";
ALTER TABLE "T_MESSAGE_TRACKING_EVENT_MTE" RENAME COLUMN "ATE_DATE" to "MTE_DATE";
ALTER TABLE "T_MESSAGE_TRACKING_EVENT_MTE" RENAME COLUMN "ATE_DELETE" to "MTE_DELETE";

ALTER TABLE "T_MESSAGE_TRACKING_EVENT_MTE" RENAME COLUMN "ATE_MSG_MSG_ID" to "MTE_MSG_MSG_ID";

-- TABLE T_PROBE_PRB

ALTER TABLE "T_PROBE_PRB" ADD COLUMN "PRB_ALERT_IF_DOWN" boolean;
UPDATE "T_PROBE_PRB" SET "PRB_ALERT_IF_DOWN" = false;
ALTER TABLE "T_PROBE_PRB" ALTER COLUMN "PRB_ALERT_IF_DOWN" SET NOT NULL;

ALTER TABLE "T_PROBE_PRB" ADD COLUMN "PRB_SNOOZE_BEFORE_NEXT_WARNING" integer;
UPDATE "T_PROBE_PRB" SET "PRB_SNOOZE_BEFORE_NEXT_WARNING" = 3600;
ALTER TABLE "T_PROBE_PRB" ALTER COLUMN "PRB_SNOOZE_BEFORE_NEXT_WARNING" SET NOT NULL;

ALTER TABLE "T_PROBE_PRB" ADD COLUMN "PRB_LAST_DOWN_ALERT" timestamp without time zone;
